FROM centos:centos7.9.2009

WORKDIR /home/coding

MAINTAINER smiecj smiecj@github.com

ARG ROOT_PWD=root!centos123

ARG MYSQL_HOST=localhost
ARG MYSQL_PORT=3306
ARG MYSQL_USER=hue
ARG MYSQL_PASSWORD=hue123
ARG MYSQL_DB=hue

# RUN
RUN mkdir -p /home/coding && cd /home/coding && curl -L https://github.com/smiecj/docker-centos/tarball/master | tar xz \
    && code_folder=`ls -l | grep docker-centos | sed 's/.* //g'` && cd $code_folder \
    && cd scripts && sh init-system.sh ${ROOT_PWD} \
    && sh init-hue.sh ${MYSQL_HOST} ${MYSQL_PORT} ${MYSQL_USER} ${MYSQL_PASSWORD} ${MYSQL_DB}

EXPOSE 22 8281